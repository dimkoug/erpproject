{% extends "base.html" %}
{% load core %}
{% block content %}
<div class="container">
    <div class="row py-2">
      <div class="col">
        <form method="post" enctype="multipart/form-data">{% csrf_token %}
          {% for field in form %}
            <div class="form-group{% if field.errors %} has-error{% endif %}">
              <label for="{{ field.id_for_label }}">{{ field.label }}</label>
              {{field}}
              {% if field.help_text %}
                <small id="{{field.id_for_label}}" class="form-text text-muted">{{ field.help_text|safe }}</small>
              {% endif %}
              <div id="{{field.id_for_label}}" class="invalid-feedback">
                {{ field.errors }}
              </div>
            </div>
          {% endfor %}
            <div class="row py-2">
              <div class="col">
                  <a href="{% get_url 'list'  %}">Back</a>
                  <input type="submit" name="continue" class="btn btn-primary float-right"  value="Save and continue editing" />
                  <input type="submit" name="new" class="btn btn-primary float-right"  value="Save and add new" />
                  {% if form.instance.pk %}
                    <a href="{% get_url 'delete' form.instance  %}" class="btn btn-danger">Delete</a>
                  {% endif %}
                  <input type="submit" class="btn btn-primary float-right" value="{% if form.instance.pk %}Update {% else  %}Save {% endif %}">
              </div>
            </div>
        </form>
      </div>
    </div>
    {% if form.instance.files.all and form.instance %}
    <div class="row py-2">
      <div class="col">
        {% for doc in form.instance.files.all %}
        <a href="{{doc.document.url}}">{{doc.document.name}}</a> - <a href="{% url 'dms:delete_file' form.instance.pk doc.id %}">Remove file</a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
</div>

{% endblock %}
